<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./static/images/favion2.png" type="image/png" style="height:26px;width:26px">
    <title>Registration - Hiring with AI-powered Candidate Selection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: #f6fbfe;
            border-radius: 24px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: 40px;
            width: 100%;
            max-width: 650px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 30px;
            max-width: 100%;
            width: 100%;
        }

        .progress-bar::before {
            content: '';
            background-color: #e0e0e0;
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 4px;
            width: 100%;
            z-index: 1;
        }

        .progress-bar-fill {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 4px;
            background-color: #3498db;
            transition: width 0.5s ease;
            z-index: 2;
        }

        .step {
            width: 30px;
            height: 30px;
            background-color: #fff;
            border: 3px solid #e0e0e0;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #999;
            z-index: 3;
            transition: all 0.3s ease;
        }

        .step.active {
            border-color: #3498db;
            color: #3498db;
        }

        .step.completed {
            border-color: #3498db;
            background-color: #3498db;
            color: white;
        }

        .step-label {
            position: absolute;
            bottom: -25px;
            text-align: center;
            font-size: 12px;
            /* color: #7f8c8d; */
            white-space: nowrap;
        }

        /* 
        #step1 .step-label {
            left: 15px;
        }

        #step2 .step-label {
            left: 286px;
        }

        #step3 .step-label {
            left: 556px;
        } */

        .form-header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .form-header h2 {
            color: #2c3e50;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .input-icon {
            position: relative;
        }

        .input-icon input,
        .input-icon select {
            padding-left: 40px;
        }

        .input-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
        }

        input,
        select {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: none;
            outline: none;
            border-bottom: 1px solid #3498db;
            border-radius: 4px;
            font-size: 14px;
            background: #f8fafc;
            color: #2c3e50;
            transition: all 0.3s ease;
        }

        input:focus,
        select:focus {
            border-color: #3498db;
            background: #fff;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
        }

        input:focus+i,
        select:focus+i {
            color: #2980b9;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: #34495e;
            font-weight: 500;
        }

        .side-by-side {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .password-criteria {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            background: #f8fafc;
        }

        .password-criteria p {
            font-size: 12px;
            margin: 5px 0;
            color: #7f8c8d;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .password-criteria p::before {
            content: '•';
            color: #bdc3c7;
        }

        .password-criteria p.valid::before {
            content: '✓';
            color: #27ae60;
        }

        .password-criteria p.invalid::before {
            content: '×';
            color: #e74c3c;
        }

        button {
            width: 100%;
            padding: 14px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .back-btn {
            background: #f8fafc;
            color: #3498db;
            border: 1px solid #3498db;
            width: 30%;
            border-radius: 45px;
        }

        .next-btn {
            width: 30%;
            border-radius: 45px;
        }

        .err-message {
            margin-top: 5px;
            font-size: 12px;
            color: #e74c3c;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        a {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: #3498db;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
            cursor: pointer !important;
        }

        a:hover {
            color: #2980b9;
        }

        .form-step {
            display: none;
            animation: slideIn 0.4s ease-out forwards;
        }

        .form-step.active {
            display: block;
        }

        .error-input {
            border-color: #e74c3c !important;
            box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.2) !important;
        }

        .fa-eye,
        .fa-eye-slash {
            margin-left: 85%;
        }

        .linkedin-btn {
            background: #0077b5;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .linkedin-btn:hover {
            background: #005e93;
        }

        .linkedin-btn svg {
            fill: white;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px 0;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(52, 152, 219, 0.2);
            border-radius: 50%;
            border-top-color: #3498db;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }

        .message-container {
            position: fixed;
            top: 10px;
            left: 34%;
            transform: translate(-50%, -50%);
            width: 50%;
            max-width: 400px;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            display: none;
            text-align: center;
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            animation: slideDown 0.5s ease-out forwards;
            z-index: 1000;
        }

        .message-container.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .message-container.success {
            background-color: #dbf8d7;
            color: green;
            border: 1px solid #05a705;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .success-animation {
            text-align: center;
            padding: 40px 0;
            display: none;
        }

        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: #4bb71b;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #4bb71b;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
            margin: 0 auto 20px;
        }

        .checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: #4bb71b;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        @keyframes scale {

            0%,
            100% {
                transform: none;
            }

            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }

        @keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 30px #4bb71b;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
            }

            .side-by-side {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .form-header h2 {
                font-size: 24px;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .back-btn,
            .next-btn {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <div class="container">
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
                <div class="step active" id="step1">
                    1
                    <span class="step-label">Account</span>
                </div>
                <div class="step" id="step2">
                    2
                    <span class="step-label">LinkedIn</span>
                </div>
                <div class="step" id="step3">
                    3
                    <span class="step-label">Complete</span>
                </div>
            </div>
        </div>

        <div class="form-header">
            <h2>YourbestRecruiterAI</h2>
            <p style="color: #7f8c8d;">Experience the future of recruitment technology</p>
        </div>

        <!-- Step 1: Registration Form -->
        <form id="registrationForm">
            <div class="form-step active" id="formStep1">
                <div class="form-group">
                    <label for="username">Name<span style="color: red;">*</span></label>
                    <div class="input-icon">
                        <i class="fas fa-user"></i>
                        <input type="text" id="username" name="username" autocomplete="nope"
                            placeholder="Enter your full name">
                    </div>
                    <div class="err-message" id="username-error"></div>
                </div>
                <div class="side-by-side">
                    <div class="form-group">
                        <label for="phone">Phone<span style="color: red;">*</span></label>
                        <div class="input-icon">
                            <i class="fas fa-phone"></i>
                            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number"
                                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10);">
                        </div>
                        <div class="err-message" id="phone-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="email">Email<span style="color: red;">*</span></label>
                        <div class="input-icon">
                            <i class="fas fa-envelope"></i>
                            <input type="text" id="email" name="email" placeholder="Enter your email">
                        </div>
                        <div class="err-message" id="email-error"></div>
                    </div>
                </div>

                <div class="side-by-side">
                    <div class="form-group">
                        <label for="company">Company<span style="color: red;">*</span></label>
                        <div class="input-icon">
                            <i class="fas fa-building"></i>
                            <input type="text" id="company" name="company" placeholder="Enter company name"
                                oninput="this.value = this.value.trim();">
                        </div>
                        <div class="err-message" id="company-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="country">Country</label>
                        <div class="input-icon">
                            <i class="fas fa-globe"></i>
                            <select id="country" name="country">
                                <option value="" disabled selected>Select your country</option>
                                <option value="United States">United States</option>
                                <option value="Afghanistan">Afghanistan</option>
                                <option value="Albania">Albania</option>
                                <option value="Australia">Australia</option>
                                <option value="Bangladesh">Bangladesh</option>
                                <option value="Belgium">Belgium</option>
                                <option value="Brazil">Brazil</option>
                                <option value="Cambodia">Cambodia</option>
                                <option value="Canada">Canada</option>
                                <option value="China">China</option>
                                <option value="Denmark">Denmark</option>
                                <option value="Egypt">Egypt</option>
                                <option value="Ethiopia">Ethiopia</option>
                                <option value="Finland">Finland</option>
                                <option value="France">France</option>
                                <option value="Gabon">Gabon</option>
                                <option value="Gambia">Gambia</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Germany">Germany</option>
                                <option value="Ghana">Ghana</option>
                                <option value="Greece">Greece</option>
                                <option value="Greenland">Greenland</option>
                                <option value="Iceland">Iceland</option>
                                <option value="India">India</option>
                                <option value="Indonesia">Indonesia</option>
                                <option value="Iran">Iran</option>
                                <option value="Ireland">Ireland</option>
                                <option value="Israel">Israel</option>
                                <option value="Italy">Italy</option>
                                <option value="Jamaica">Jamaica</option>
                                <option value="Japan">Japan</option>
                                <option value="Jordan">Jordan</option>
                                <option value="Kazakhstan">Kazakhstan</option>
                                <option value="Kenya">Kenya</option>
                                <option value="Kuwait">Kuwait</option>
                                <option value="Kyrgyzstan">Kyrgyzstan</option>
                                <option value="Malaysia">Malaysia</option>
                                <option value="Malta">Malta</option>
                                <option value="Mexico">Mexico</option>
                                <option value="Morocco">Morocco</option>
                                <option value="Nepal">Nepal</option>
                                <option value="Netherlands">Netherlands</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="Nigeria">Nigeria</option>
                                <option value="Norway">Norway</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="Qatar">Qatar</option>
                                <option value="Romania">Romania</option>
                                <option value="Russia">Russia</option>
                                <option value="Saudi Arabia">Saudi Arabia</option>
                                <option value="Singapore">Singapore</option>
                                <option value="South Africa">South Africa</option>
                                <option value="Spain">Spain</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                                <option value="Sweden">Sweden</option>
                                <option value="Switzerland">Switzerland</option>
                                <option value="Turkey">Turkey</option>
                                <option value="Ukraine">Ukraine</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="United States">United States</option>
                                <option value="Venezuela">Venezuela</option>
                                <option value="Vietnam">Vietnam</option>
                                <option value="Zambia">Zambia</option>
                                <option value="Zimbabwe">Zimbabwe</option>

                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="linkedin-url">Add Your LinkedIn Page URL <span style="color: red;">*</span></label>
                    <div class="input-icon">
                        <i class="fab fa-linkedin"></i>
                        <input type="url" id="linkedin-url" name="linkedin-url"
                            placeholder="https://linkedin.com/username" oninput="this.value = this.value.trim();">
                    </div>
                    <div class="err-message" id="linkedin-url-error"></div>
                </div>
                <div class="form-group">
                    <label for="password">Password<span style="color: red;">*</span></label>
                    <div class="input-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" name="password" placeholder="Create a password"
                            oninput="this.value = this.value.trim();" autocomplete="new-password">
                        <i class="fas fa-eye" id="togglePassword"></i>
                    </div>
                    <div id="passwordCriteria" class="password-criteria">
                        <p id="lengthCriteria">At least 8 characters</p>
                        <p id="uppercaseCriteria">At least one uppercase letter</p>
                        <p id="numberCriteria">At least one number</p>
                        <p id="specialCharCriteria">At least one special character</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button type="button" class="next-btn" id="stepOneNext">
                        Next
                        <i style="margin-left: 12px;" class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: LinkedIn Authentication -->
            <div class="form-step" id="formStep2">
                <div class="form-group" style="text-align: center;">
                    <h3>LinkedIn Authentication</h3>
                    <p style="margin: 20px 0;">Please authenticate with your LinkedIn account to verify your
                        professional identity.</p>
                    <button type="button" class="linkedin-btn" id="linkedinAuthBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                            <path
                                d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19a.66.66 0 000 .14V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z">
                            </path>
                        </svg>
                        Signup with LinkedIn
                    </button>
                    <div id="linkedinAuthError" style="color: #e74c3c; margin-top: 20px; display: none;">
                        Authentication failed. Please try again.
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button type="button" class="back-btn" id="stepTwoBack">Back</button>
                    <!-- <button type="button" class="next-btn" id="stepTwoNext" disabled>Continue</button> -->
                </div>
            </div>

            <!-- Step 3: Completion -->
            <div class="form-step" id="formStep3">
                <div class="form-group" style="text-align: center;">
                    <h3>Registration Complete</h3>
                    <p style="margin: 20px 0;">Thank you for registering with YourbestRecruiterAI. You'll be redirected
                        to your dashboard shortly.</p>
                </div>
            </div>

            <!-- Loading Animation -->
            <div class="loading" id="loadingAnimation">
                <div class="spinner"></div>
                <p>Processing your request...</p>
            </div>

            <!-- Success Animation -->
            <div class="success-animation" id="successAnimation">
                <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" />
                    <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                </svg>
                <p>Registration successful!</p>
                <p>Redirecting to dashboard...</p>
            </div>

            <a href="/login" id="loginLink" style="cursor: pointer; display: block;">Already have an account? Login</a>
        </form>
    </div>

    <div id="messageContainer" class="message-container"></div>

    <script>
        // Initialize toastr notification settings
        toastr.options = {
            closeButton: true,
            progressBar: true,
            positionClass: "toast-top-right",
            timeOut: 3000
        };

        // DOM elements
        const form = document.getElementById('registrationForm');
        const step1 = document.getElementById('formStep1');
        const step2 = document.getElementById('formStep2');
        const step3 = document.getElementById('formStep3');
        const stepOneNext = document.getElementById('stepOneNext');
        const stepTwoBack = document.getElementById('stepTwoBack');
        const stepTwoNext = document.getElementById('stepTwoNext');
        const linkedinAuthBtn = document.getElementById('linkedinAuthBtn');
        const loginLink = document.getElementById('loginLink');
        const loadingAnimation = document.getElementById('loadingAnimation');
        const successAnimation = document.getElementById('successAnimation');
        const linkedinAuthError = document.getElementById('linkedinAuthError');
        const progressBarFill = document.getElementById('progressBarFill');

        // Step indicators
        const step1Indicator = document.getElementById('step1');
        const step2Indicator = document.getElementById('step2');
        const step3Indicator = document.getElementById('step3');

        // Password toggle functionality
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');

        togglePassword.addEventListener('click', function () {
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                togglePassword.classList.remove('fa-eye');
                togglePassword.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                togglePassword.classList.remove('fa-eye-slash');
                togglePassword.classList.add('fa-eye');
            }
        });

        // Validation functions
        function validateUsername(username) {
            const usernameError = document.getElementById('username-error');
            if (!username.trim()) {
                usernameError.textContent = "Name is required";
                return false;
            } else if (username.length < 3) {
                usernameError.textContent = "Name must be at least 3 characters";
                return false;
            } else {
                usernameError.textContent = "";
                return true;
            }
        }

        function validatePhone(phone) {
            const phoneError = document.getElementById('phone-error');
            const phoneRegex = /^[0-9]{10}$/;

            if (!phoneRegex.test(phone)) {
                phoneError.textContent = "Please enter a valid 10-digit phone number";
                return false;
            } else {
                phoneError.textContent = "";
                return true;
            }
        }

        function validateEmail(email) {
            const emailError = document.getElementById('email-error');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const normalizedEmail = email.trim().toLowerCase();

            if (!emailRegex.test(normalizedEmail)) {
                emailError.textContent = "Please enter a valid email address";
                return false;
            } else {
                emailError.textContent = "";
                return true;
            }
        }

        function validateCompany(company) {
            const companyError = document.getElementById('company-error');
            if (!company.trim()) {
                companyError.textContent = "Company name is required";
                return false;
            } else {
                companyError.textContent = "";
                return true;
            }
        }

        function validateLinkedInUrl(url) {
            const linkedinError = document.getElementById('linkedin-url-error');
            if (!url.trim()) {
                linkedinError.textContent = "LinkedIn URL is required";
                return false;
            } else if (!url.includes('linkedin.com/')) {
                linkedinError.textContent = "Please enter a valid LinkedIn URL";
                return false;
            } else {
                linkedinError.textContent = "";
                return true;
            }
        }

        function validatePassword(password) {
            const lengthCriteria = document.getElementById('lengthCriteria');
            const uppercaseCriteria = document.getElementById('uppercaseCriteria');
            const numberCriteria = document.getElementById('numberCriteria');
            const specialCharCriteria = document.getElementById('specialCharCriteria');

            let isValid = true;

            // Check length
            if (password.length >= 8) {
                lengthCriteria.className = 'valid';
            } else {
                lengthCriteria.className = 'invalid';
                isValid = false;
            }

            // Check for uppercase letter
            if (/[A-Z]/.test(password)) {
                uppercaseCriteria.className = 'valid';
            } else {
                uppercaseCriteria.className = 'invalid';
                isValid = false;
            }

            // Check for number
            if (/[0-9]/.test(password)) {
                numberCriteria.className = 'valid';
            } else {
                numberCriteria.className = 'invalid';
                isValid = false;
            }

            // Check for special character
            if (/[^A-Za-z0-9]/.test(password)) {
                specialCharCriteria.className = 'valid';
            } else {
                specialCharCriteria.className = 'invalid';
                isValid = false;
            }

            return isValid;
        }

        // Validate all fields on step 1
        function validateStepOne() {
            const username = document.getElementById('username').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const company = document.getElementById('company').value;
            const linkedinUrl = document.getElementById('linkedin-url').value;
            const password = document.getElementById('password').value;
            const country = document.getElementById('country').value;

            const isUsernameValid = validateUsername(username);
            const isPhoneValid = validatePhone(phone);
            const isEmailValid = validateEmail(email);
            const isCompanyValid = validateCompany(company);
            const isLinkedInValid = validateLinkedInUrl(linkedinUrl);
            const isPasswordValid = validatePassword(password);

            if (isPasswordValid && isUsernameValid && isPhoneValid && isEmailValid && isCompanyValid) {
                fetch('/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username: username,
                        company: company,
                        phone: phone,
                        email: email,
                        country: country,
                        password: password,
                        profileUrl: linkedinUrl

                    })
                })
                    .then(response => {
                        if (response.ok) {
                            goToStep(2);
                        } else {
                            return response.json().then(data => {
                                toastr.error(data.message + ' Please Login using Your credentials');
                            });
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('An error occurred. Please try again.');
                    });
            }
        }

        // Add input event listeners for real-time validation
        document.getElementById('username').addEventListener('input', function () {
            validateUsername(this.value);
            updateNextButtonState();
        });

        document.getElementById('phone').addEventListener('input', function () {
            validatePhone(this.value);
            updateNextButtonState();
        });

        document.getElementById('email').addEventListener('input', function () {
            validateEmail(this.value);
            updateNextButtonState();
        });

        document.getElementById('company').addEventListener('input', function () {
            validateCompany(this.value);
            updateNextButtonState();
        });

        document.getElementById('linkedin-url').addEventListener('input', function () {
            validateLinkedInUrl(this.value);
            updateNextButtonState();
        });

        document.getElementById('password').addEventListener('input', function () {
            validatePassword(this.value);
            updateNextButtonState();
        });

        // Update the next button state based on form validation
        function updateNextButtonState() {

        }

        function showMessage(message, type) {
            const messageContainer = document.getElementById("messageContainer");
            messageContainer.textContent = message;
            messageContainer.className = `message-container ${type}`;
            messageContainer.classList.add("active");

            messageContainer.style.display = "block";

            setTimeout(() => messageContainer.classList.remove("active"), 3000);
            setTimeout(() => (messageContainer.style.display = "none"), 3000);
        }

        // Step navigation functions
        function goToStep(stepNumber) {
            step1.style.display = 'none';
            step2.style.display = 'none';
            step3.style.display = 'none';

            step1Indicator.classList.remove('active');
            step2Indicator.classList.remove('active');
            step3Indicator.classList.remove('active');

            if (stepNumber === 1) {
                step1.style.display = 'block';
                step1Indicator.classList.add('active');
                progressBarFill.style.width = '33.33%';
            } else if (stepNumber === 2) {
                step2.style.display = 'block';
                step2Indicator.classList.add('active');
                progressBarFill.style.width = '66.66%';
            } else if (stepNumber === 3) {
                step3.style.display = 'block';
                step3Indicator.classList.add('active');
                progressBarFill.style.width = '100%';
            }
        }

        stepOneNext.addEventListener('click', function (e) {
            validateStepOne();
        });

        // stepTwoBack.addEventListener('click', function (e) {
        //     e.preventDefault();
        //     goToStep(1);
        // });

        linkedinAuthBtn.addEventListener('click', function (e) {
            e.preventDefault();
            // Show loading animation
            step2.style.display = 'none';
            loadingAnimation.style.display = 'block';

            window.location.href = '/login-linkedin';

            // Simulate LinkedIn authentication (replace with actual OAuth)
            setTimeout(function () {
                loadingAnimation.style.display = 'none';

                // For demonstration, randomly succeed or fail (in real app, replace with actual auth)
                const authSuccess = Math.random() > 0.3; // 70% success rate for demo

                if (authSuccess) {
                    // Authentication successful
                    linkedinAuthError.style.display = 'none';
                    stepTwoNext.disabled = false;
                    step2.style.display = 'block';
                    goToStep(3);
                    successAnimation.style.display = 'block';
                } else {
                    // Authentication failed
                    linkedinAuthError.style.display = 'block';
                    stepTwoNext.disabled = true;
                    step2.style.display = 'block';
                    fetch('/auth/callback') // Assuming your callback endpoint is here.
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                showMessage(data.error, 'error');
                            } else {
                                showMessage("LinkedIn authentication failed.");
                            }
                        })
                        .catch(error => {
                            console.error('Error fetching callback error:', error);
                            showMessage("An unexpected error occurred during LinkedIn authentication.");
                        });

                }
            }, 2000);
        });

        stepTwoNext.addEventListener('click', function (e) {
            e.preventDefault();
            // Show loading animation
            step2.style.display = 'none';
            loadingAnimation.style.display = 'block';

            setTimeout(function () {
                loadingAnimation.style.display = 'none';
                successAnimation.style.display = 'block';
                goToStep(3);
            }, 2000);

        });

        // Initialize first step
        goToStep(1);
        updateNextButtonState();

    </script>

</body>

</html>